# ì„œìš¸ì‹œì˜ í•«í”Œë ˆì´ìŠ¤ëŠ” ì–´ë””? (2/2)

*ì„œìš¸ ì‹œì˜ ìœ ë™ì¸êµ¬, ê°€ê²Œ, SNS ë°ì´í„° ë“±ì„ í™œìš©í•˜ì—¬ ì‹œê°í™”í•´ë³´ëŠ” í”„ë¡œì íŠ¸ì´ë‹¤.*

# 3. ê°€ê²Œ

---

*ì„œë¸Œì›¨ì´ ìš°ë¦¬ë™ë„¤ë§Œ ì—†ì–´â€¦.*

![Untitled](https://user-images.githubusercontent.com/37128004/197394816-e076cd43-fa12-4cf8-b5fa-f43cf407d514.png)

[https://m.newspim.com/news/view/20170224000113](https://m.newspim.com/news/view/20170224000113)

ë‚´ê°€ ì‚¬ëŠ” ë™ë„¤ì˜ ìƒê¶Œì´ ê´œì°®ì€ì§€, í•«í”Œë ˆì´ìŠ¤ë¼ê³  í•  ìˆ˜ ìˆëŠ”ì§€, ì†Œìœ„ ë§í•˜ëŠ” â€˜ì‹œë‚´â€™(ì„œìš¸ì€ ì „ì—­ì´ ì‹œë‚´ì´ê¸´ í•˜ë‹¤) ì¸ì§€ 

í™•ì¸í•  ìˆ˜ ìˆëŠ” ì§€í‘œê°€ ìˆì„ê¹Œ í•˜ëŠ” ì˜ë¬¸ì—ì„œ ì¶œë°œí–ˆë‹¤. ì¹œêµ¬ë“¤ë¼ë¦¬ ìš°ìŠ¤ê°¯ì†Œë¦¬ë¡œ ì´ëŸ° ë§ì„ í•˜ê³¤ í–ˆë‹¤. 

<aside>
â“ â€˜**ìŠ¤íƒ€ë²…ìŠ¤, ë²„ê±°í‚¹, ì˜¬ë¦¬ë¸Œì˜** 3ëŒ€ì¥ì´ ëª¨ë‘ ëª¨ì—¬ìˆìœ¼ë©´ ê·¸ ì£¼ë³€ì€ ì™ ë§Œí•˜ë©´ í•«í”Œì´ë‹¤.â€™

</aside>

ê³¼ì—° ì‹¤ì œë¡œ ê·¸ëŸ´ê¹Œ? í™•ì¸í•´ë³´ì. 

ì´ **3ê°€ì§€ í”„ë Œì°¨ì´ì¦ˆ**ì—ë‹¤ê°€ **ë„¤ì´ë²„ê°€ ì„ ì •í•œ 100ëŒ€ ë§›ì§‘**ê³¼ **ì„œë¸Œì›¨ì´**ë¥¼ í•©ì³ â€˜**ë™ë„¤ í•«í”Œë ˆì´ìŠ¤ ì§€í‘œâ€™**ë¥¼ ë§Œë“¤ì–´ë³´ê³ ì í•œë‹¤. 

(ì´ëŠ” ì„œìš¸ì‹œì—ë§Œ ì ìš©ë˜ëŠ” ê²ƒì€ ì•„ë‹ˆê³  ì „êµ­ì— ì ìš©ë  ìˆ˜ ìˆìŒì„ ë¯¸ë¦¬ ì•Œë¦°ë‹¤.)

## Preprocessing

---

### 1) image â†’ data url

```python
import base64
import pandas as pd
import os
import pickle

os.chdir('F:/Competitions/SeoulHotPlace')
MAPBOX_API_KEY = 'pk.eyJ1IjoibHNqOTg2MiIsImEiOiJja3dkNjMxMDczOHd1MnZtcHl0YmllYWZjIn0.4IFNend5knY9T_h3mv8Bwg'

def image_to_data_url(filename):
    ext = filename.split('.')[-1]
    prefix = f'data:image/{ext};base64,'
    with open(filename, 'rb') as f:
        img = f.read()
    return prefix + base64.b64encode(img).decode('utf-8')
```

pydeckì˜ icon layer inputìœ¼ë¡œ ì´ë¯¸ì§€ë¥¼ ë„£ê¸° ìœ„í•´ì„  ì´ë¯¸ì§€ íŒŒì¼ì„ urlë¡œ ë³€í™˜í•´ì£¼ëŠ” ì‘ì—…ì´ í•„ìš”í•˜ë‹¤. 

### 2) icon data ìƒì„± ë° ë°ì´í„° ë³‘í•©

íŒ€ì›ë“¤ì´ í¬ë¡¤ë§í•œ ë„¤ì´ë²„ ë§›ì§‘ Top100, ì˜¬ë¦¬ë¸Œì˜, ì„œë¸Œì›¨ì´, ë²„ê±°í‚¹, ìŠ¤íƒ€ë²…ìŠ¤ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì™€ â€˜icon dataâ€™ ì»¬ëŸ¼ì„ ìƒì„±í•œë‹¤. 

icon dataëŠ” dictionary í˜•íƒœë¡œ url, width, height, anchorY 4ê°œì˜ keyë¥¼ ê°€ì§€ê³  ìˆë‹¤. 

```python
### 1. Naver Top100
# 1.1. Load Data
df_1 = pd.read_csv('https://raw.githubusercontent.com/SungJun98/Seoul_Viz/SungJun98/data/naver_Gabozza_detail.csv', index_col=0)
coordinates = [[x, y] for x, y in zip(df_1.longitude, df_1.latitude)]
df_1['coordinates'] = coordinates

NAVER_ICON_URL = 'https://s.pstatic.net/static/www/mobile/edit/2016/0705/mobile_212852414260.png'
icon_data = {
    "url": NAVER_ICON_URL,
    "width": 128,
    "height": 128,
    "anchorY": 128,
}

df_1['icon_data'] = None
for i in df_1.index:
    df_1["icon_data"][i] = icon_data
df_1['layer'] = "naver"

### 2. OliveYoung
# 2.1. Load Data
df_2 = pd.read_csv(r'https://raw.githubusercontent.com/SungJun98/Seoul_Viz/SungJun98/data/oliveyoung.csv', index_col=0)
coordinates = [[x, y] for x, y in zip(df_2.longitude, df_2.latitude)]
df_2['coordinates'] = coordinates

OLIVEYOUNG_ICON = r'F:\Competitions\SeoulHotPlace/oliveyoung_logo.png'

icon_64 = image_to_data_url(OLIVEYOUNG_ICON)
icon_data = {
    "url": icon_64,
    "width": 128,
    "height": 128,
    "anchorY": 128,
}

df_2['icon_data'] = None
for i in df_2.index:
    df_2["icon_data"][i] = icon_data
df_2['layer'] = "oliveyoung"

### 3. Subway
# 3.1. Load Data
df_3 = pd.read_csv(r'https://raw.githubusercontent.com/SungJun98/Seoul_Viz/SungJun98/data/subway.csv', index_col = 0)
coordinates = [[x, y] for x, y in zip(df_3.longitude, df_3.latitude)]
df_3['coordinates'] = coordinates

SUBWAY_ICON_URL = r'F:\Competitions\SeoulHotPlace/subway_logo.png'
icon_64 = image_to_data_url(SUBWAY_ICON_URL)

icon_data = {
    "url": icon_64,
    "width": 128,
    "height": 128,
    "anchorY": 128,
}

df_3['icon_data'] = None
for i in df_3.index:
    df_3["icon_data"][i] = icon_data
df_3['layer'] = "subway"

### 4. BurgerKing
# 4.1. Load Data
df_4 = pd.read_csv(r'https://raw.githubusercontent.com/SungJun98/Seoul_Viz/SungJun98/data/burgerking.csv', index_col = 0)
coordinates = [[x, y] for x, y in zip(df_4.longitude, df_4.latitude)]
df_4['coordinates'] = coordinates

BURGERKING_ICON = r'https://raw.githubusercontent.com/SungJun98/Seoul_Viz/SungJun98/data/burgerking_logo.png'
#icon_64 = image_to_data_url(BURGERKING_ICON)

icon_data = {
    "url": BURGERKING_ICON,
    "width": 128,
    "height": 128,
    "anchorY": 128,
}

df_4['icon_data'] = None
for i in df_4.index:
    df_4["icon_data"][i] = icon_data
df_4['layer'] = "burgerking"

### 5. Starbucks
# 5.1. Load Data
df_5 = pd.read_csv(r'https://raw.githubusercontent.com/SungJun98/Seoul_Viz/SungJun98/data/starbucks.csv')
coordinates = [[x, y] for x, y in zip(df_5.longitude, df_5.latitude)]
df_5['coordinates'] = coordinates

STARBUCKS_ICON = r'https://image.istarbucks.co.kr/common/img/common/favicon.ico?v=2008'
icon_data = {
    "url": STARBUCKS_ICON,
    "width": 128,
    "height": 128,
    "anchorY": 128,
}

df_5['icon_data'] = None
for i in df_5.index:
    df_5["icon_data"][i] = icon_data
df_5['layer'] = "starbucks"

df_list = [df_1, df_2, df_3, df_4, df_5]
df = pd.concat(df_list, ignore_index=True).fillna('None')

with open(r'F:\Competitions\SeoulHotPlace/df.pickle', 'wb') as f:
    pickle.dump(df, f, pickle.HIGHEST_PROTOCOL)
```

í•©ì¹œ ê²°ê³¼ dfëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤. 

|  | name | type | address | latitude | longitude | coordinates | icon_data | layer |
| --- | --- | --- | --- | --- | --- | --- | --- | --- |
| 0 | ëŸ°ë˜ ë² ì´ê¸€ ë®¤ì§€ì—„ | ë² ì´ì»¤ë¦¬ | ì„œìš¸íŠ¹ë³„ì‹œ ì¢…ë¡œêµ¬ ë¶ì´Œë¡œ4ê¸¸ 20 | 37.57929 | 126.9861 | [126.9861472, 37.5792893] |   {'url': 'https://s.pstatic.net/static/www/mobile/edit/2016/0705/mobile_212852414260.png', 'width': 128, 'height': 128, 'anchorY': 128} | naver |
| 1 | ëª°ë˜ ì´íƒˆë¦¬ì•ˆ ì—ìŠ¤í”„ë ˆì†Œë°” | ì¹´í˜,ë””ì €íŠ¸ | ì„œìš¸íŠ¹ë³„ì‹œ ì¤‘êµ¬ ëª…ë™ê¸¸ 73 | 37.56433 | 126.9861 | [126.9860873, 37.564327] |   {'url': 'https://s.pstatic.net/static/www/mobile/edit/2016/0705/mobile_212852414260.png', 'width': 128, 'height': 128, 'anchorY': 128} | naver |
| 2 | ë‚œí¬ | í•œì‹ | ì„œìš¸íŠ¹ë³„ì‹œ ì„±ë™êµ¬ ì„œìš¸ìˆ²4ê¸¸ 18-8 | 37.54705 | 127.0424 | [127.0424257, 37.5470545] |   {'url': 'https://s.pstatic.net/static/www/mobile/edit/2016/0705/mobile_212852414260.png', 'width': 128, 'height': 128, 'anchorY': 128} | naver |

(1,318 rows X 8 columns) 

## Mapping

---

ì˜ í•©ì³ì§„ ë°ì´í„°í”„ë ˆì„ì„ ì´ì „ì˜ ìœ ë™ì¸êµ¬ mappingê³¼ ê±°ì˜ ìœ ì‚¬í•œ í˜•íƒœë¡œ ì§„í–‰í•œë‹¤. 

app.callbackì˜ inputìœ¼ë¡œ **ê°€ê²Œì˜ ì¢…ë¥˜ë¥¼ checklistí˜•íƒœ**ë¡œ ë°›ìœ¼ë©´ ì•Œë§ê²Œ dfë¥¼ filteringí•˜ì—¬ ì§€ë„ì— ê·¸ë ¤ì£¼ê²Œ ëœë‹¤. 

ì´ë²ˆì—” layerë¥¼ ë¯¸ë¦¬ ì •ì˜í•˜ê³  ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì•„ë‹Œ callback ì´í›„ì— ì„ ì–¸í•  í•¨ìˆ˜ì— í•œêº¼ë²ˆì— ì„ ì–¸í•˜ì—¬ ì‚¬ìš©í•´ì£¼ê² ë‹¤. 

```python
import os
import pydeck as pdk
import dash
import pickle 
from dash import dcc, html
from dash.dependencies import Input, Output, State
import dash_deck
os.chdir('F:/Competitions/SeoulHotPlace')
MAPBOX_API_KEY = 'pk.eyJ1IjoibHNqOTg2MiIsImEiOiJja3dkNjMxMDczOHd1MnZtcHl0YmllYWZjIn0.4IFNend5knY9T_h3mv8Bwg'

with open(r'F:\Competitions\SeoulHotPlace/df.pickle', 'rb') as f:
    df = pickle.load(f) 
with open('./seoul_boundary.pickle', 'rb') as f:
    dff = pickle.load(f)
```

### 1) dash - app.layout

dcc.Checklistì— **5ê°œì˜ ê°€ê²Œ í˜•íƒœë¥¼ multi input**ìœ¼ë¡œ ë°›ì„ ìˆ˜ ìˆê²Œ ì£¼ê³  **update ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ë°˜ì˜ë˜ê²Œ ë§Œë“ ë‹¤.** 

```python
colors = {
    "background": "#111111",
    "text": "#ffffff"
}
app = dash.Dash(__name__)
app.layout = html.Div(
    style={"backgroundColor": colors["background"], "width" : "100%"}, children = [
        html.Div(
            dcc.Checklist(
                [
                    {"label" : "naver", "value": "naver"},
                    {"label" : "oliveyoung", "value": "oliveyoung"},
                    {"label" : "subway", "value": "subway"},
                    {"label" : "burgerking","value": "burgerking"},
                    {"label" : "starbucks", "value": "starbucks"}
                ],
                value = ["naver", "burgerking"],
                id = "store_select",
                persistence=True
                ), style = {'display' : 'inline-block', 'color' : 'white', 'textAlign': 'center','padding': 20}
            ),
        html.A(html.Button('update'), href='/', id = 'update-button'), # í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨ ë²„íŠ¼ 
        html.Br(),
        html.Div(
            id = "deck-gl",
            style={
                "width": "90%",
                "padding-left" : "5%",
                "padding-right" : "5%",
                "height": "93vh",
                "display": "inline-block",
                "position": "relative"
                },
            children = []
            )
        ]
    )
```

ì½”ë“œë¥¼ êµ¬í˜„í•  ë•Œ ì•½ê°„ì˜ íŠ¸ë¦­(?)ì„ ì‚¬ìš©í•˜ì˜€ëŠ”ë°, ì´ˆë°˜ë¶€ì˜ ì‹œë„ì—ì„œ **Checklistì—ì„œ multi=True ì˜µì…˜ìœ¼ë¡œ interactiveí•˜ê²Œ ì ìš©ì‹œí‚¤ëŠ” ë°©ë²•ì´ í†µí•˜ì§€ ì•Šì•˜ê¸° ë•Œë¬¸ì´ë‹¤.** 

checklistë¥¼ ì˜ êµ¬í˜„í•´ì„œ ì—¬ëŸ¬ ê°œì˜ ê°€ê²Œë¥¼ ì²´í¬í•´ë„ updating ëœë‹¤ëŠ” í‘œí˜„ë§Œ ëœ¨ê³  ì‹¤ì œë¡œ ì§€ë„ëŠ” ì—…ë°ì´íŠ¸ ë˜ì§€ ì•Šì•˜ê¸° ë•Œë¬¸ì´ë‹¤. (iconì´ ëœ¨ì§€ ì•ŠëŠ” ê²ƒì€ ë¤ì´ì˜€ë‹¤.)

<aside>
â— ë‹¤ë¥¸ ì‹œë„ê°€ ëª¨ë‘ ì‹¤íŒ¨í•˜ì **ì˜¤íˆë ¤ ì´ ì‚¬ì‹¤ì„ ì´ìš©í•˜ëŠ” ë°©ë²•ì„ ìƒê°í•´ë´¤ë‹¤. 

ì‹¤ì œë¡œ checklistì— ì—¬ëŸ¬ ê°œì˜ ê°€ê²Œë¥¼ ì²´í¬í•œ ì´í›„ í˜ì´ì§€ë¥¼ ìƒˆë¡œê³ ì¹¨í•´ë„ ì²´í¬í•œ ê²ƒë“¤ì´ ìœ ì§€ëœë‹¤ëŠ” ì‚¬ì‹¤**ì„ ì´ìš©í•´ì„œ 

**update ë²„íŠ¼ì„ ìƒˆë¡œê³ ì¹¨ ë²„íŠ¼**ìœ¼ë¡œ ë§Œë“¤ì—ˆë‹¤.(html.Button í•¨ìˆ˜ì˜ href ì¸ìì˜ ê°’ì„ â€˜/â€™ë¡œ ì£¼ë©´ ìƒˆë¡œê³ ì¹¨ ë²„íŠ¼ì´ ëœë‹¤! )

</aside>

### 2) dash - app.callback

ìœ ë™ì¸êµ¬ì™€ ë§ˆì°¬ê°€ì§€ë¡œ ì„œìš¸ì‹œ ê²½ê³„ layerë¥¼ ìŒ“ê³  ê·¸ ìœ„ì— icon layerë¥¼ ìŒ“ì•„ì„œ ì§€ë„ê°€ êµ¬í˜„ë˜ê²Œ ë§Œë“¤ì—ˆë‹¤. 

```python
@app.callback(
    Output(component_id = "deck-gl", component_property = "children"),
    [Input(component_id = "store_select", component_property = "value"),
     State(component_id = "update-button", component_property = "n_clicks")]
)
def make_layer(store_type, n_clicks):
    dat = df[df.layer.isin(store_type)]
    
    # boundary layer 
    boundary_layer = pdk.Layer(
        'PolygonLayer',
        dff,
        get_polygon = 'coordinates',
        get_fill_color = '[128, 128, 128]',
        pickable = True,
        auto_highlight = True,
        opacity = 0.05
    )

    # icon layer
    icon_layer = pdk.Layer(
        "IconLayer",
        dat,
        get_icon="icon_data",
        get_size=6,
        size_scale=3,
        get_position="coordinates",
        pickable=True,
        auto_highlight=True
    )

    ### Set the viewport location
    center = [126.986, 37.565]
    view_state = pdk.ViewState(longitude=center[0], latitude=center[1], zoom=11)
    r = pdk.Deck(layers=[boundary_layer, icon_layer], initial_view_state=view_state, mapbox_key=MAPBOX_API_KEY)
    
    return dash_deck.DeckGL(r.to_json(), id = "deck-gl", tooltip = True, mapboxKey=r.mapbox_key)

if __name__ == "__main__":
    app.run_server(debug=True)
```

## Visualization

---

**3ëŒ€ì¥(ìŠ¤íƒ€ë²…ìŠ¤, ì˜¬ë¦¬ë¸Œì˜, ë²„ê±°í‚¹)**ì„ ì²´í¬í•˜ê³  updateí•œ ê²°ê³¼ì´ë‹¤. 

ì—­ì‹œë‚˜ **ê°•ë‚¨, ì‹ ì´Œ, í™ëŒ€, ì—¬ì˜ë„**ê°€ ê°•ì„¸ë¥¼ ë³´ì´ê³  **ë‹¤í¬í˜¸ìŠ¤ ì¢…ë¡œ**ê°€ ë“±ì¥í–ˆë‹¤. ê±´ëŒ€ëŠ” ìƒëŒ€ì ìœ¼ë¡œ ì•½ì„¸ë¥¼ ë³´ì¸ë‹¤. 

**ìŠ¤íƒ€ë²…ìŠ¤, ì˜¬ë¦¬ë¸Œì˜, ë²„ê±°í‚¹ì´ í•¨ê»˜ìˆëŠ” ì§€ì—­ì´ í•«í”Œë ˆì´ìŠ¤ ì§€ì—­**ìœ¼ë¡œ ë¶ˆë¦¬ê¸°ì— ì†ìƒ‰ì´ ì—†ì–´ ë³´ì¸ë‹¤. 

![Untitled 1](https://user-images.githubusercontent.com/37128004/197394831-d69d1b23-8809-41eb-b800-19e896544557.png)

ì—¬ê¸°ì„œ ë§Œì•½ ì˜¬ë¦¬ë¸Œì˜ê³¼ ìŠ¤íƒ€ë²…ìŠ¤ë¥¼ ì œê±°í•˜ê³  naver top100ê³¼ ì„œë¸Œì›¨ì´ë¥¼ checkí•˜ë©´ ì´ëŸ°ì‹ìœ¼ë¡œ ë‚˜ì˜¤ê²Œ ëœë‹¤. 

**ë„¤ì´ë²„ ë§›ì§‘**ì´ ì¶”ê°€ë˜ì ë” í™•ì‹¤í•˜ê²Œ êµ¬ë¶„ë˜ëŠ” ëª¨ìŠµì´ ë³´ì¸ë‹¤. 

![Untitled 2](https://user-images.githubusercontent.com/37128004/197394835-5de52d79-3646-4d51-b69b-38291b61dc61.png)

# 4. ì¸ìŠ¤íƒ€ê·¸ë¨ í¬ë¡¤ë§

---

*ì¸ìŠ¤íƒ€ëŠ” ë‹µì„ ì•Œê³ ìˆë‹¤â€¦..*

![Untitled 3](https://user-images.githubusercontent.com/37128004/197394860-8de8bba7-6f80-4ac7-939c-f99e519f5298.png)

ë°”ì•¼íë¡œ ì‚¬ì§„, ì¸ì¦ìƒ·ì˜ ì‹œëŒ€ê°€ ë„ë˜í•˜ì˜€ê³  í•«í”Œë ˆì´ìŠ¤ë¥¼ ì°¾ëŠ”ë‹¤ë©´ **ì¸ìŠ¤íƒ€ê·¸ë¨**ì„ ì´ìš©í•  ìˆ˜ ë°–ì— ì—†ì–´ì¡Œë‹¤. 

ìì‹ ì´ ì–¼ë§ˆë‚˜ **ë§›ìˆëŠ” ìŒì‹**ì„ ë¨¹ì—ˆëŠ”ì§€, ì–¼ë§ˆë‚˜ **ì´ìœ ì¹´í˜**ì— ì™”ëŠ”ì§€, ì–¼ë§ˆë‚˜ **ë©‹ì§„ ì¥ì†Œ**ì—ì„œ ì‹œê°„ì„ ë³´ë‚´ëŠ”ì§€ **ì•ë‹¤íˆ¬ì–´ ì‚¬ì§„ìœ¼ë¡œ ì°ì–´ì„œ ì˜¬ë¦°ë‹¤.**

ê·¸ë¦¬ê³  í•¨ê»˜ **íƒœê·¸**ë¥¼ ë‹¨ë‹¤. ì‚¬ì§„ì„ í¬ë¡¤ë§í•˜ì—¬ ë¶„ì„í•˜ê¸°ì—” ë¬´ë¦¬ê°€ ìˆìœ¼ë‹ˆ **ê²Œì‹œë¬¼ê³¼ í•¨ê»˜ ì˜¬ë¼ì˜¨ ê¸€ê³¼ íƒœê·¸**ë¥¼ í¬ë¡¤ë§í•˜ì—¬ ê·¸ë ¤ë³´ê³ ì í•œë‹¤. 

```python
from konlpy.tag import Okt
import numpy as np 
import pandas as pd
import os
import pickle
import itertools
import re
from collections import Counter
import matplotlib.pyplot as plt
from tqdm import tqdm
import bar_chart_race as bcr
from wordcloud import WordCloud
from PIL import Image
os.chdir(r'C:\Users\itsme\Desktop\seoul-viz')
```

## Crawled Data BarChartRace

---

### 1) Preprocessing

ê²Œì‹œê¸€ ë‚´ìš©ì„ í¬ë¡¤ë§í•œ ë°ì´í„°ë¥¼ í™œìš©í•˜ì—¬ **Bar Chart Race**ë¥¼ ê·¸ë ¤ë³´ì•˜ë‹¤. 

ì—¬ê¸°ì„œ **Bar Chart Race**ë€ ì‹œê³„ì—´ indexë¥¼ ê°€ì§„ ë°ì´í„°ì—ì„œ ì‹œê°„ì´ ì§€ë‚ ìˆ˜ë¡ featureê°€ ì–´ë–»ê²Œ ë³€í™”í•˜ëŠ”ì§€ë¥¼ ì›€ì§ì´ëŠ” ë§‰ëŒ€ê·¸ë˜í”„ë¡œ ë³´ì—¬ì£¼ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ì´ë‹¤.

ì´ë¥¼ ê·¸ë¦¬ê¸° ìœ„í•´ì„  í•˜ë‚˜ì˜ ë°ì´í„°í”„ë ˆì„ìœ¼ë¡œ ê·¸ë ¤ì•¼í•˜ë¯€ë¡œ íŒ€ì›ì´ í•œë•€í•œë•€ í¬ë¡¤ë§í•œ ë°ì´í„°ë¥¼ ê°€ì ¸ì™€ í•˜ë‚˜ì˜ main_dfë¡œ í•©ì³ì£¼ì—ˆë‹¤. 

í¬ë¡¤ë§í•œ ì›ì²œ ë°ì´í„°ëŠ” ë‹¤ìŒê³¼ ê°™ì´ ìƒê²¼ë‹¤. í¬ë¡¤ë§ ê¸°ê°„ì€ 22ë…„ 7ì›” 9ì¼ë¶€í„° 8ì›” 26ì¼ ê¹Œì§€ì´ë‹¤. 

|  | location_info | location_href | date_time | daste_title | main_text |
| --- | --- | --- | --- | --- | --- |
| 0 | 25ë¶„ ì „ |  | 2022-07-13T13:47:40.000Z | 7ì›” 13, 2022 | ìˆ˜ê°•ìƒë¶„ì˜ ë¼ì´ì–¸ í”Œë ˆì´íŠ¸ #ê°•ë‚¨ë„ìê¸°ê³µë°©#ë™í™”ë‹´#ì„œìš¸ì›ë°ì´í´ë˜ìŠ¤#ì„œìš¸ë°ì´íŠ¸#ê°•ë‚¨ê³µë°©#ê³µë°©ì›ë°ì´í´ë˜ìŠ¤#ë„ìê¸°ë§Œë“¤ê¸°#ì»¤í”Œë°ì´íŠ¸#ì»¤í”ŒìŠ¤íƒ€ê·¸ë¨ #ì»µë§Œë“¤ê¸°#ì ‘ì‹œë§Œë“¤ê¸°#ë„ìê¸°ê³µì˜ˆ#ë¬¼ë ˆì²´í—˜#ê³µë°©ì²´í—˜#ì„œìš¸ê°€ë³¼ë§Œí•œê³³#ì–‘ì¬ì²œ |
| 1 | 10ì‹œê°„ ì „ |  | 2022-07-13T03:22:36.000Z | 7ì›” 13, 2022 | ìŒì‹ë“¤ì´ ë„ˆë¬´ë„ˆë¬´ ì •ì„±ìŠ¤ëŸ½ë‹¤..#ë¯¸ë„ì¸ #ì¢…ê°ë§›ì§‘#ê´‘í™”ë¬¸ìŠ¤í…Œì´í¬#ì¢…ë¡œë§›ì§‘#ì¢…ë¡œë§›ì§‘ë¯¸ë„ì¸#ì¢…ë¡œê³ ê¹ƒì§‘#ì¢…ê°ê³ ê¹ƒì§‘#ì¸ì‚¬ë™ë§›ì§‘#ì¸ì‚¬ë™ê³ ê¹ƒì§‘#JMT#ì„œìš¸ë°ì´íŠ¸ |

```python
### 1. extracted_main data
## 1) ë°ì´í„° ë¡œë“œ ë° í•©ì¹˜ê¸° 
lst = os.listdir('./main')
path = './main/'
main_df = pd.DataFrame(columns = ['daste_title', 'main_text'])
for i in lst:
    dat = pd.read_csv(path + i, index_col=0).drop(['location_info', 'location_href', 'date_time'], axis=1)
    main_df = pd.concat([main_df, dat])
main_df = main_df.dropna().reset_index(drop=True)
main_df.columns = ['time', 'text']

## 2) time column ì •ë¦¬
def time_format(text):
    a = re.sub(",", "", text).split()
    if len(a[1]) == 1:
        res = a[0] + ' 0' + a[1] + 'ì¼'
    else:
        res = a[0] + ' ' + a[1] + 'ì¼'
    return res

main_df['time'] = [time_format(i) for i in main_df['time']]
main_df['idx'] = pd.to_datetime(main_df['time'], format = "%mì›” %dì¼")
main_df = main_df.sort_values('idx').drop('idx', axis=1).reset_index(drop=True)
```

### 2) Text Preprocessing

**konlpyì˜ okt í˜•íƒœì†Œë¶„ì„ê¸°**ë¥¼ í™œìš©í•˜ì—¬ í…ìŠ¤íŠ¸ ì „ì²˜ë¦¬ë¥¼ ì§„í–‰í•˜ì˜€ë‹¤. **ë¶ˆìš©ì–´ë¥¼ ì œê±°**í•˜ê³  **í•œê¸€, ê³µë°±ì„ ì œì™¸í•œ ëª¨ë“  ë¬¸ìë¥¼ ì œê±°**í•´ì£¼ì—ˆë‹¤.

ì¸ìŠ¤íƒ€ ê²Œì‹œê¸€ì—” ìƒë‹¹íˆ ë§ì€ **ì´ëª¨ì§€ë‚˜ íŠ¹ìˆ˜ë¬¸ì**ê°€ ë§ì•˜ê¸° ë•Œë¬¸ì´ë‹¤.(~~ì´ëŸ° ë¹„ì–¸ì–´ì ì¸(?) í‘œí˜„ë“¤ì´ ì¤‘ìš”í•œ ë¹„ì¤‘ì„ ì°¨ì§€í•  ê°€ëŠ¥ì„±ì´ ìˆì§€ë§Œ ì§€ê¸ˆ ë‹¹ì¥ì€ ë¬´ì‹œí•´ì¤€ë‹¤.~~)

ë°ì´í„°ê°€ ê±°ì˜ ì—†ëŠ” ê¸°ê°„ì€ ì œì™¸í•˜ê³  ë¹ˆ ë¦¬ìŠ¤íŠ¸ ë˜í•œ ì œê±°í•´ì£¼ì—ˆë‹¤. 

```python
## 3) text ì „ì²˜ë¦¬ 
okt = Okt()
stop_words = pd.read_table(r'./Korean_stopwords.txt',sep='\n', names=['text'])
stop_word = stop_words.values

# ëª…ì‚¬ ì¶”ì¶œ ë° ì •ì œ
def preprocessing(text, okt, remove_stopwords=False, stop_words=[]):
    text_text = re.sub("[^ê°€-í£ã„±-ã…ã…-ã…£\\s]", "", text)  # í•œê¸€, ê³µë°± ì œì™¸ ë¬¸ì ëª¨ë‘ ì œê±° 
    word_text = okt.nouns(text_text)                       # okt ê°ì²´ í™œìš©, ëª…ì‚¬ ë‹¨ìœ„ë¡œ ë‚˜ëˆ„ê¸° 
    if remove_stopwords == True:
        word_texts = [token for token in word_text if not token in stop_words]

    return word_texts

clean_df = []
for text in tqdm(main_df['text']):
    clean_df.append(preprocessing(text, okt, remove_stopwords=True,stop_words=stop_word))
main_df['clean_text'] = clean_df

# ê¸°íƒ€ ì²˜ë¦¬ 
main_df['a'] = " "
for i in range(len(main_df['clean_text'])):
    if main_df.loc[i, 'clean_text'] == []:
        main_df.loc[i, 'a'] = 1

index = main_df[main_df['a'] == 1].index
main_df.drop(index, inplace=True)  # ë¹ˆ ë¦¬ìŠ¤íŠ¸ ì œê±° 
main_df.drop(['a', 'text'], axis=1, inplace=True)

main_df = main_df.iloc[77:5713, :]  # ë°ì´í„° ë¶€ì¡±í•œ ë‚ ì§œ ì œê±° (7ì›” 8ì¼ ~ 8ì›” 26ì¼ë¡œ ê³ ì •)
main_df.reset_index(drop=True, inplace=True)
```

|  | time | clean_text |
| --- | --- | --- |
| 0 | 7ì›” 08ì¼ | ['í”¼ë“œ', 'ê²°í˜¼ê¸°ë…ì¼', 'ë§ì´', 'ìš°ì£¼', 'íŒŒíŒŒ', 'ìš°ì£¼', 'ì–¼ì§‘', 'í–‰ë³µ', 'êµ¬ê²½', 'ìš°ì£¼', 'ì–¼ì§‘',
  'í•˜ì›', 'ì™¸ì¶œ', 'ìš°ì£¼', 'ë¶€ë¶€', 'ê·¸ë‚ ', 'í•˜ë£¨', 'ì¢…ì¼', 'ê²°ê¸°', 'ì¼ì´', 'ì—°ì°¨', 'ì–´ì œ', 'ì˜¤ë¹ ',
  'ì½”ë¡œë‚˜', 'í™•ì§„', 'ìš°ì£¼'] |
| 1 | 7ì›” 08ì¼ | ['ê´‘ê³ ', 'ì˜¤í”ˆ', 'ë§¤ì¥', 'ì¸µ', 'ëŸ­ì…”ë¦¬', 'ë¸Œëœë“œ', 'í–¥ìˆ˜', 'ì¡´', 'ë°±í™”ì ', 'ë³´ì§€', 'ëª»', 'í–¥ìˆ˜',
  'í–¥', 'ë¶€ë‹´', 'ëŸ­ì…”ë¦¬', 'ë¸Œëœë“œ', 'ì œí’ˆ', 'ì²´í—˜', 'ê³µê°„', 'ì¸µ', 'ì»¬ëŸ¬', 'ìŠ¤íŠœë””ì˜¤', 'ë„¤ì¼', 'í¼ìŠ¤',
  'ë„', 'ì§„ë‹¨', 'í†µí•´', 'ë©”ì´í¬ì—…', 'í—¤ì–´', 'ì»¨ì„¤íŒ…', 'ë„¤ì¼ì¼€ì–´', 'ë§ì¶¤', 'íŠ¹í™”ëœ', 'ê³µê°„', 'ì§€í•˜', 'ë§ˆì¼“',
  'í¬í† ', 'ì¡´', 'ìµœëŒ€', 'í• ì¸', 'ì œí’ˆ', 'ê°€ì„±', 'ë¹„', 'ë¹„', 'ì¸µ', 'ì•ˆìª½', 'í•‘í¬', 'ë¶€ìŠ¤', 'í¬í† ',
  'ì¡´', 'ê¼­', 'ê³µê°„', 'ë§Œ', 'ë·°í‹°', 'ì œí’ˆ', 'ê°€ë“', 'ê°•ë‚¨', 'ê°•ë‚¨', 'ì—­ì ', 'í•«', 'ê°•ë‚¨', 'í•«',
  'ë·°í‹°', 'ë·°í‹°'] |
| 2 | 7ì›” 08ì¼ | ['ì „ì‹œ', 'ì˜ˆìˆ ', 'ë¬¸í™”', 'í˜ì´ìŠ¤', 'ê°¤ëŸ¬ë¦¬', 'ì‹œì‘', 'ì„¸ê³„', 'ì •ìƒ', 'ê°¤ëŸ¬ë¦¬', 'ì§„ì¶œ', 'ë¶ˆê³¼',
  'í•´ë„', 'ì•„ì‹œì•„', 'ê°¤ëŸ¬ë¦¬', 'ì§„ì¶œ', 'ì‹œì¥', 'í™ì½©', 'ìƒí•˜ì´', 'ê·¸ë‹¤ìŒ', 'ë„ì¿„', 'ê±°ë¡ ', 'ë¿', 'ì´ì œ',
  'ì•„ì‹œì•„', 'í•µì‹¬', 'ì•„íŠ¸', 'ë§ˆì¼“', 'íŒ¬ë°ë¯¹', 'ìƒí™©', 'í­ë°œ', 'ì„±ì¥', 'ê¸€ë¡œë²Œ', 'ê°¤ëŸ¬ë¦¬', 'ê´€ì‹¬', 'ì§‘ì¤‘',
  'êµ­ë‚´', 'ì „ë¬¸ê°€', 'ì¼ìˆœê°„', 'ìƒí™©', 'ì•ˆì •', 'ìƒí™©', 'ëŒ€ì¤‘', 'ê³µê³µ', 'ë¯¸ìˆ ê´€', 'ê· í˜•', 'ì›ë¡œ', 'ì‘ê°€',
  'ì‹ ì§„', 'ì‘ê°€', 'ì˜ˆìˆ ', 'ê´€ì‹¬', 'ëŒ€ì¤‘', 'ì¡´ì¬', 'ë§ˆì¼“', 'í˜•ì„±', 'ê·œëª¨', 'ë©´', 'íƒ€', 'ë„ì‹œ', 'ë¹„êµ',
  'ë§ˆì¼“', 'ì‚¬ì´ì¦ˆ', 'ì§€ì†', 'ê¸ì •', 'ì˜ˆìˆ ', 'ì¸í”„ë¼', 'ì°¨ê³¡ì°¨ê³¡', 'ìš°ë¦¬ë‚˜ë¼', 'ì˜ˆìˆ ', 'ë¬¸í™”', 'ì˜ˆì •', 'ì˜¤ëŠ˜',
  'ê¼­', 'ê°¤ëŸ¬ë¦¬', 'í•œë‚¨ë™', 'ìœ„ì¹˜', 'ë³¼', 'í•˜ë£¨', 'í•«', 'ì „ì‹œ', 'ì „ì‹œíšŒ', 'ê°¤ëŸ¬ë¦¬', 'í•œë‚¨ë™', 'ì „ì‹œ',
  'í•œë‚¨ë™', 'ê°¤ëŸ¬ë¦¬', 'ë¯¸ìˆ ê´€', 'ë¦¬ì›€', 'ë¯¸ìˆ ê´€', 'ìš°ìŠ¤', 'íŒŒìš´ë“œë¦¬', 'ë¦¬ë§Œ', 'ë¨¸í•€', 'ê°¤ëŸ¬ë¦¬', 'ë°•', 'ë¶€ìŠ¤',
  'ê°¤ëŸ¬ë¦¬', 'ì¹´ë“œ', 'ìŠ¤í† ë¦¬', 'í˜ì´ìŠ¤', 'ê°¤ëŸ¬ë¦¬', 'ì˜¤ë“œ', 'ì‚¼ì‚¼'] |

### 3) Count & A**ccumulate**

ë³¸ê²©ì ìœ¼ë¡œ race ê·¸ë˜í”„ë¥¼ ê·¸ë¦¬ê¸° ìœ„í•´ ë°ì´í„°ë¥¼ ì •ë¦¬í•´ì¤€ë‹¤. 

1. ê°™ì€ ë‚ ì§œê°€ ë‚˜ë‰˜ì–´ì ¸ ìˆëŠ” ê²½ìš°ë“¤ì´ ë§ìœ¼ë¯€ë¡œ **ë‚ ì§œë³„ë¡œ list í˜•íƒœë¡œ í‚¤ì›Œë“œë“¤ì„ í•©ì³ì¤€ë‹¤.** - **itertools**ë¥¼ í™œìš©í•˜ì—¬ ê° ë¦¬ìŠ¤íŠ¸ì˜ ì›ì†Œë“¤ì„ ê·¸ëŒ€ë¡œ ê°€ì ¸ì™€ì„œ ë¶™ì¸ë‹¤. 
2. ì „ì²´ ë‹¨ì–´(ê° ë‚ ì§œë‹¹ ê°¯ìˆ˜ top50)ì„ ìì²´ ì»¬ëŸ¼ìœ¼ë¡œ ë§Œë“¤ì–´ **ì‹œê°„ì´ ê°ˆìˆ˜ë¡ ëª‡ê°œê°€ ìˆëŠ”ì§€ë¥¼ ëˆ„ì í•©**ì„ êµ¬í•´ì¤€ë‹¤. - Counter í•¨ìˆ˜ë¥¼ ì´ìš©í•˜ì—¬ ì„¸ì¤€ë‹¤. 

```python
## 4) bar chart raceë¥¼ ìœ„í•œ ë°ì´í„° êµ¬ì¶• 
# ë‚ ì§œ ë³„ í‚¤ì›Œë“œ í•©ì¹˜ê¸° 
main_df = main_df.groupby('time')['clean_text'].apply(list).reset_index()
for i in range(len(main_df)):
    val = list(itertools.chain.from_iterable(main_df.at[i, 'clean_text']))
    main_df.at[i, 'clean_text'] = val

# counted ë°ì´í„° ìƒì„± 
for i in range(len(main_df)):
    a = Counter(main_df.loc[i, 'clean_text']).most_common(50)
    for j in a:
        main_df.loc[i, '{}'.format(j[0])] = j[1]
main_df.drop('clean_text', axis=1, inplace=True)
main_df = main_df.fillna(0)
main_df.iloc[:, 1:] = main_df.iloc[:, 1:].cumsum()
main_df.set_index('time', inplace=True)
```

ìµœì¢…ì ìœ¼ë¡œ ì •ë¦¬ëœ main_dfëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤. 

**ìƒëŒ€ì ìœ¼ë¡œ ë¹ˆë„ìˆ˜ê°€ ë†’ì•˜ë˜ ë‹¨ì–´ 905ê°œì˜ ê°¯ìˆ˜ë¥¼ ë‚ ì§œê°€ ì§€ë‚¨ì— ë”°ë¼ ëˆ„ì í•©ì„ êµ¬í•œ ë°ì´í„°ì´ë‹¤.** 

| time | ê°¤ëŸ¬ë¦¬ | ì „ì‹œ | ì˜ˆìˆ  | ë§ˆì¼“ | í•« | ì‹ ì´Œ | ìƒí™© | ë¯¸ìˆ ê´€ | í•œë‚¨ë™ |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| 7ì›” 08ì¼ | 21 | 10 | 8 | 7 | 7 | 7 | 6 | 6 | 6 |
| 7ì›” 09ì¼ | 21 | 19 | 8 | 7 | 112 | 18 | 6 | 6 | 6 |
| 7ì›” 10ì¼ | 21 | 19 | 8 | 7 | 233 | 18 | 6 | 6 | 6 |
| 7ì›” 11ì¼ | 21 | 23 | 8 | 7 | 233 | 18 | 6 | 6 | 6 |
| 7ì›” 12ì¼ | 21 | 35 | 8 | 7 | 313 | 18 | 6 | 6 | 6 |
| 7ì›” 13ì¼ | 21 | 67 | 8 | 7 | 367 | 18 | 6 | 6 | 6 |
| 7ì›” 14ì¼ | 21 | 67 | 8 | 7 | 401 | 62 | 6 | 6 | 6 |
| 7ì›” 15ì¼ | 21 | 67 | 8 | 7 | 401 | 62 | 6 | 6 | 6 |
| 7ì›” 16ì¼ | 21 | 67 | 8 | 7 | 401 | 62 | 6 | 6 | 6 |
| 7ì›” 17ì¼ | 21 | 67 | 8 | 7 | 401 | 62 | 6 | 6 | 6 |
| 7ì›” 18ì¼ | 21 | 100 | 8 | 7 | 448 | 62 | 6 | 6 | 6 |

(50 rows X 905 columns)

### 4) Visualization

bar_chart_race í•¨ìˆ˜ë¡œ ê·¸ë˜í”„ë¥¼ ê·¸ë¦°ë‹¤. mp4 í˜•íƒœë¡œ outputì„ ì €ì¥í•  ìˆ˜ ìˆë‹¤. 

**ê°€ì¥ ë§ì´ ë“±ì¥í•œ ìƒìœ„ 10ê°œ ë‹¨ì–´**ì˜ raceë¥¼ ê·¸ë ¤ë³´ì•˜ë‹¤. 

```python
## 5) ê·¸ë˜í”„ ê·¸ë¦¬ê¸° 
plt.figure(figsize=(24, 16), dpi=1000)
fig, ax = plt.subplots(nrows=1, ncols=1)
fig.patch.set_facecolor('black')
ax.set_facecolor('black')
ax.set_title('Instagram Hottest Keywords (07/08 ~ 08/26)', fontsize=15, color= 'white', fontweight='bold')

bcr.bar_chart_race(df = main_df, 
                   filename = "./insta_race.mp4", 
                   orientation='h',
                   n_bars = 10,
                   fixed_max=True,
                   steps_per_period=60,
                   perpendicular_bar_func='median', 
                   period_length=200,
                   period_label={'x': .98, 'y': .3, 'ha': 'right', 'va': 'center'},
                   shared_fontdict={'family' : 'NanumGothic', 'color' : 'white', 'weight' : 'bold', 'size' : 10},
                   bar_size=.9,
                   scale='linear',
                   bar_kwargs={'alpha': .7},
                   figsize=(12,8),
                   filter_column_colors=True,
                   fig=fig,
                   sort='desc')
```

í•¨ìˆ˜ì¸ìë“¤ì— íŠ¹ì´ì‚¬í•­ì€ ì—†ì§€ë§Œ ëª‡ ê°€ì§€ íŠ¹ì´ì‚¬í•­ì„ ì²¨ì–¸í•˜ìë©´,

1. n_bars = 10 : ìƒìœ„ 10ê°œì˜ ë‹¨ì–´ë¥¼ ë³´ì—¬ì¤€ë‹¤.
2. steps_per_period : ìˆ«ìê°€ í´ìˆ˜ë¡ ë¶€ë“œëŸ½ë‹¤. 
3. period_length : ì°¨íŠ¸ ì¦ê°€ ì†ë„
4. shared_fontdic : ì „ì²´ì ì¸ í°íŠ¸ ìŠ¤íƒ€ì¼ ì„¤ì •, ë‚˜ëˆ” ê³ ë”•ì˜ ê²½ìš° **matplotlibì´ ë² ì´ìŠ¤ë¼ í°íŠ¸ ì„¤ì¹˜**ë¥¼ í•´ì¤˜ì•¼ í•œê¸€ì´ ë³´ì¸ë‹¤!

ê·¸ë ¤ì§„ bar chart raceëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.

[insta_race.mp4](%E1%84%89%E1%85%A5%E1%84%8B%E1%85%AE%E1%86%AF%E1%84%89%E1%85%B5%E1%84%8B%E1%85%B4%20%E1%84%92%E1%85%A1%E1%86%BA%E1%84%91%E1%85%B3%E1%86%AF%E1%84%85%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%89%E1%85%B3%E1%84%82%E1%85%B3%E1%86%AB%20%E1%84%8B%E1%85%A5%E1%84%83%E1%85%B5%20(2%202)%20ccde91c6956c407e906e79fec095edfe/insta_race.mp4)

ì˜ì–´ í°íŠ¸ì˜ ê²½ìš° ì´ì •ë„ë¡œ í™”ì§ˆêµ¬ì§€ê°€ ë˜ì§€ ì•ŠëŠ”ë° í•œê¸€ êµ¬í˜„ì˜ í•œê³„ ë•Œë¬¸ì¸ì§€ ì•„ë¬´ë¦¬ figureì˜ dpië¥¼ ë†’ì—¬ë„ ê¸€ìê°€ ê¹¨ì§€ëŠ”ê±´ ì–´ì©”ìˆ˜ê°€ ì—†ì—ˆë‹¤.

ì—­ì‹œë‚˜ â€˜**ì¹´í˜**â€™ê°€ 1ë“±ì„ ì°¨ì§€í•˜ì˜€ë‹¤. ì°¨ë¡€ëŒ€ë¡œ **í•«, ë§›, ì‚¬ì§„, ì½”ìŠ¤, ì—¬í–‰, ê³ ê¸°, ë©”ë‰´, ìˆ ì§‘, ê¸¸** ë‹¨ì–´ê°€ ìƒìœ„ 10ê°œ ë‹¨ì–´ë¡œ ë‚˜íƒ€ë‚¬ë‹¤. 

í•«í”Œë ˆì´ìŠ¤ê°€ ì–´ë””ì¸ì§€ í™•ì¸í•˜ê¸°ì— ì í•©í•œ ë°©ë²•ì€ ì•„ë‹ˆì§€ë§Œ **ì‚¬ëŒë“¤ì´ ì–´ë–¤ í‚¤ì›Œë“œë¥¼ ê°€ì§€ê³  í•«í”Œë ˆì´ìŠ¤ë‚˜ ê¸€ì— ëŒ€í•œ ì •ë³´**ë¥¼ ì˜¬ë¦¬ëŠ”ì§€ ê°„ì ‘ì ìœ¼ë¡œ ì•Œ ìˆ˜ ìˆì—ˆë‹¤. 

## Tag Data WordCloud

---

ì´ë²ˆì—” í•´ì‹œíƒœê·¸ë¥¼ í¬ë¡¤ë§í•œ ë°ì´í„°ë¡œ wordcloudë¥¼ ê·¸ë ¤ë³´ë„ë¡ í•˜ì. 

### 1) Data Load & Preprocessing

íŒ€ì›ì´ ê°™ì´ í¬ë¡¤ë§í•œ ë‚ ì§œë³„ íƒœê·¸ ë°ì´í„°ë¥¼ í•˜ë‚˜ë¡œ ëª¨ì•„ì„œ í•©ì³ì¤€ë‹¤. 

```python
## 1) ë°ì´í„° ë¡œë“œ
lst = os.listdir('./tag')
path = './tag/'
okt = Okt()
stop_words = pd.read_table(r'./Korean_stopwords.txt',sep='\n', names=['text'])
stop_word = stop_words.values

tag_df = pd.DataFrame(columns = ['tag'])
for i in lst:
    dat = pd.read_csv(path + i, index_col=0)
    tag_df = pd.concat([tag_df, dat])
tag_df = tag_df.dropna().reset_index(drop=True)

## 2) ì „ì²˜ë¦¬
def listToString(str_list):
    result = ""
    for s in str_list:
        result += s + " "
    return result.strip()
seoul_mask = np.array(Image.open(r'.\seoul.png'))

clean_tag = listToString(tag_df['tag'])
clean_tag = re.sub("[^ê°€-í£ã„±-ã…ã…-ã…£\\s]", "", clean_tag)
clean_tag = okt.nouns(clean_tag)
clean_tag = listToString(clean_tag)
```

ì´ì „ê³¼ ë‹¤ë¥¸ ì ì€ ë‚ ì§œë³„ë¡œ êµ¬ë¶„í•˜ì§€ ì•Šê³  **ëª¨ë“  íƒœê·¸ ë°ì´í„°ë¥¼ í•˜ë‚˜ë¡œ ëª¨ì•„ì„œ í•˜ë‚˜ì˜ str ê°ì²´**ë¡œ ë§Œë“  ê²ƒì´ë‹¤. 

ë˜í•œ ê·¸ëƒ¥ ë„¤ëª¨ ëª¨ì–‘ìœ¼ë¡œ ê·¸ë¦¬ë©´ ì¬ë¯¸ê°€ ì—†ìœ¼ë‹ˆ **ì„œìš¸ì‹œ ì§€ë„ëª¨ì–‘**ì„ ê°€ì ¸ì™€ ë§ì¶°ì„œ ê·¸ë ¤ë³´ì•˜ë‹¤. 

íƒœê·¸ ë°ì´í„° ì—­ì‹œ **ë¶ˆìš©ì–´ ë° í•œê¸€ ì œì™¸ ì œê±°í•˜ê³  ëª…ì‚¬ë§Œ ì¶”ì¶œ**í•˜ì—¬ ì§„í–‰í•˜ì˜€ë‹¤. 

### 2) Visualization

WordCloud í•¨ìˆ˜ë¡œ ê·¸ë ¤ì¤€ë‹¤. í¸í•˜ê²Œë„ ë¶ˆìš©ì–´ì™€ ë°°ê²½ëª¨ì–‘ì„ ì„¤ì •í•´ì£¼ëŠ” ì¸ìê°€ ì¡´ì¬í•˜ì—¬ ì´ìš©í•˜ì˜€ë‹¤. 

```python
## 3) wordcloud ê·¸ë¦¬ê¸° 
wordcloud = WordCloud(font_path=r".\NanumGothic.ttf",
                      background_color='black', 
                      max_font_size=200, 
                      relative_scaling = 0.2,
                      stopwords=set(stop_words['text']),
                      mask=seoul_mask).generate(str(clean_tag))

plt.figure(figsize=(64, 36), dpi=600)
plt.imshow(wordcloud, interpolation='bilinear')
plt.axis('off')
plt.show()
```

ìµœì¢…ì ìœ¼ë¡œ ê·¸ë ¤ì§„ WordCloudì´ë‹¤. 

![Untitled 4](https://user-images.githubusercontent.com/37128004/197394900-7b63fb4b-1253-46ef-ba25-de915cc88dd4.png)

ì—¬ê¸°ì„œë„ ë˜ë‹¤ì‹œ ë“±ì¥í•œ **ì¹´í˜, ì½”ìŠ¤, ìˆ ì§‘** ë“±ì´ ë³´ì¸ë‹¤. **ì´ì „ ë°ì´í„°ë³´ë‹¨ í•«í”Œë ˆì´ìŠ¤ë¼ëŠ” í‚¤ì›Œë“œì— ì¢€ ë” ê·¼ì ‘í•´ë³´ì¸ë‹¤.** 

**ì¢…ë¡œ, í™ëŒ€, ì‹ ì´Œ, ê°•ë‚¨, ì—°ë‚¨ë™, ì¸ì‚¬ë™, ì´íƒœì›** ë“± ì „í†µì ì¸ í•«í”Œë ˆì´ìŠ¤ ê°•ì(?)ê°€ ë§ì´ í¬ì§„ë˜ì–´ ìˆìŒì„ ì•Œ ìˆ˜ ìˆë‹¤. 

# 5. Conclusion

---

*ì œê°€ ë§¡ì€ íŒŒíŠ¸ëŠ” ì—¬ê¸°ê¹Œì§€ëë‹ˆë‹¤*

**ì„œìš¸ì‹œì˜ í•«í”Œë ˆì´ìŠ¤**ë¥¼ ë°ì´í„°ë¡œ í™•ì¸í•´ë³´ê³ ì í•˜ëŠ” ëŒ€ì¥ì •ì´ ë§‰ì„ ë‚´ë ¸ë‹¤. 

ìš°ë¦¬ê°€ í”íˆ ì•Œë˜ í•«í•œ ì§€ì—­ - ê°•ë‚¨, ì‹ ì´Œ, í™ëŒ€, ê±´ëŒ€ ë“± - ì´ **ë°ì´í„°ë¡œë„ í•«í”Œì„ì„ ë³´ì—¬ì¤„ ìˆ˜ ìˆëŠ”ê°€ê°€ í”„ë¡œì íŠ¸ì˜ ì£¼ëœ ëª©ì **ì´ì˜€ë‹¤.

- **ìœ ë™ì¸êµ¬ ë°ì´í„°**ëŠ” *ì‚¬ëŒë“¤ì´ ì£¼ë¡œ ì–´ë””ë¡œ ì´ë™í•˜ê³  ëª¨ì´ëŠ”ì§€* ë¥¼ ë³´ì—¬ì£¼ì—ˆë‹¤.
- **ê°€ê²Œ ë°ì´í„°**ëŠ” *íŠ¹ì • ê°€ê²Œë“¤ì´ ë°€ì ‘ë˜ì–´ ìˆëŠ” ê³³ì´ í•«í”Œì¸ì§€* ë¥¼ ë³´ì—¬ì£¼ì—ˆë‹¤.
- **ì¸ìŠ¤íƒ€ê·¸ë¨ ë°ì´í„°**ëŠ” *ì‚¬ëŒë“¤ì´ ì–´ë–¤ ê²ƒì— ê´€ì‹¬ì´ ìˆê³  ì–´ë””ë¥¼ ê°€ëŠ”ì§€* ë¥¼ ë³´ì—¬ì£¼ì—ˆë‹¤.

<aside>
ğŸ˜† **ìœ ë™ì¸êµ¬, ê°€ê²Œ, ì¸ìŠ¤íƒ€ê·¸ë¨ ë°ì´í„°**ë¥¼ í†µí•´ í™•ì¸í•´ë³¸ ê²°ê³¼ **ì´ëŸ° ì§€ì—­ë“¤ì´ ë°ì´í„°ì—ì„œë„ í•«í”Œë¡œ ë‚˜íƒ€ë‚¨ì„ í™•ì¸í•  ìˆ˜ ìˆì—ˆë‹¤.**

</aside>

ë§ˆë¬´ë¦¬ê°€ ëœ ì‹œì ì—ì„œ ëŒì•„ë³´ë©´ ì‘ì„±í•œ ì½”ë“œì˜ ê¸¸ì´ê°€ ë“¤ì¸ ì‹œê°„ì— ë¹„í•´ ê·¸ë¦¬ ê¸¸ì§„ ì•Šì§€ë§Œ ì™„ì„±í•˜ê¸°ê¹Œì§€ ìˆ˜ë§ì€ ì˜¤ë¥˜ì™€ ì‹œí–‰ì°©ì˜¤ê°€ ìˆì—ˆë‹¤.

ë‹¨ìˆœíˆ ì§€ë„ì— ì›í•˜ëŠ” ë°ì´í„°ë¥¼ ë„ìš°ëŠ” ê²ƒë§Œìœ¼ë¡œë„ ì• ë¥¼ ë¨¹ì—ˆê³ , ë˜ ê·¸ê²ƒì„ dashì™€ ê°™ì€ ë‹¤ë¥¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ì™€ ì—°ë™ì‹œí‚¤ëŠ” ë¶€ë¶„ì—ì„œ í•œì°¸ í—¤ë§¸ë‹¤.

ëª‡ ì‹œê°„ì„ í—¤ë©”ë‹¤ê°€ ê²¨ìš° ì°¾ì€ í•´ë‹µì´ ê²¨ìš° í•œ ë‘ì¤„ ë°”ê¾¸ëŠ” ê²ƒì¼ë• í—ˆíƒˆí–ˆë˜ ê¸°ì–µë„ ë§ì•˜ë‹¤.(ë¬¼ë¡  ëŠ˜ ê·¸ëŸ° ê²ƒ ê°™ë‹¤..)

í•˜ì§€ë§Œ ë…¸ë ¥ ëì— ì›í•˜ë˜ ê·¸ë¦¼ì´ ë‚˜ì˜¤ëŠ” ìˆœê°„ì˜ ê¸°ì¨ì€ ì–¸ì œ ëŠë¼ë“  ê¸°ë¶„ ì¢‹ì€ ê°ì •ì´ë‹¤! 

~~ì´ë ‡ê²Œ ë§í•˜ë‹ˆ ë­”ê°€ ëŒ€ë‹¨í•œ ê±¸ í•œ ê²ƒ ê°™ì§€ë§Œ ì „í˜€ ì•„ë‹ˆë‹¤~~. 

## Next?

ì‚¬ì‹¤ ì•„ì§ ëë‚œê²Œ ì•„ë‹ˆë‹¤!

ì§€ê¸ˆê¹Œì§€ í•œ ëª¨ë“  ì¼ë ¨ì˜ ì‘ì—…ë“¤ì€ ì„œìš¸ì‹œì˜ í•«í”Œì„ ì†Œê°œí•˜ëŠ” ìš°ë¦¬ë§Œì˜ ì‚¬ì´íŠ¸ì— ë“¤ì–´ê°ˆ ì½˜í…ì¸ ë¥¼ ë§Œë“  ì‘ì—…ì´ì˜€ë‹¤.

ì´ ë‹¤ìŒ ì‘ì—…ì€ Herokuë¼ëŠ” ì‚¬ì´íŠ¸ë¥¼ í†µí•´ dashboardë¥¼ ë°°í¬í•˜ê³  ì´ë¥¼ html í˜•íƒœë¡œ ì‚¬ì´íŠ¸ì— ì˜¬ë¦¬ëŠ” ê²ƒì´ë‹¤.

ë§ˆë¬´ë¦¬ê¹Œì§€ ë‹¬ë ¤ë³¸ë‹¤! 

# References

[[Python/bar-chart-race] ì›€ì§ì´ëŠ” ë§‰ëŒ€ ì°¨íŠ¸ ì‹œê°í™” ì‚¬ìš©ë²• ì •ë¦¬](https://coding-kindergarten.tistory.com/116)

[ê°„í¸í•˜ê²Œ ì‚¬ìš©í•˜ë©´ì„œë„ ê½¤ ì´ìœ ê¸°ëŠ¥ë„ ë§ì€ ì›Œë“œ í´ë¼ìš°ë“œ Word Cloud ëª¨ë“ˆ (for Python)](https://pinkwink.kr/1029)
